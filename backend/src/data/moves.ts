/**
 * Move Database
 * Contains all move definitions with full battle data
 * Used by creature-generator to create moves for NFTs
 */

// Local type definitions to avoid import mismatch
export type ElementType = 'FIRE' | 'WATER' | 'GRASS' | 'ELECTRIC' | 'ICE' | 'EARTH' | 'DARK' | 'LIGHT';
export type StatusEffectType = 'BURN' | 'FREEZE' | 'POISON' | 'PARALYZE' | 'STUN' | 'BLIND' | 'FEAR' | 'SLOW' | 'DRAIN';

// Move categories
export type MoveCategory = 'PHYSICAL' | 'SPECIAL' | 'STATUS';

// Full move definition
export interface MoveDefinition {
    moveId: number;         // Unique ID (1-255, 0 = empty)
    name: string;           // Display name
    type: ElementType;      // Element type
    category: MoveCategory; // Physical, Special, or Status
    power: number;          // 0-200 (0 for status moves)
    accuracy: number;       // 0-100
    cooldownMax: number;    // 0-10 turns
    priority: number;       // -2 to +2 (for Solidity we add 128 to make unsigned)
    statusEffect?: StatusEffectType;
    statusChance: number;   // 0-100 (percentage)
    description: string;
}

// Element type to numeric ID mapping
export const ELEMENT_TYPE_ID: Record<ElementType, number> = {
    FIRE: 0,
    WATER: 1,
    GRASS: 2,
    ELECTRIC: 3,
    ICE: 4,
    EARTH: 5,
    DARK: 6,
    LIGHT: 7,
};

// Status effect to numeric ID mapping
export const STATUS_EFFECT_ID: Record<string, number> = {
    NONE: 0,
    BURN: 1,
    FREEZE: 2,
    POISON: 3,
    PARALYZE: 4,
    STUN: 5,
    BLIND: 6,
    FEAR: 7,
    SLOW: 8,
    DRAIN: 9,
};

// Category to numeric ID mapping
export const CATEGORY_ID: Record<MoveCategory, number> = {
    PHYSICAL: 0,
    SPECIAL: 1,
    STATUS: 2,
};

// ============ MOVE DATABASE ============
// Each element has 6 moves available
// Moves are balanced with:
// - 1 basic move (no cooldown, low power)
// - 2 medium moves (1-2 turn cooldown, medium power)
// - 1 signature move (3 turn cooldown, high power)
// - 2 utility moves (status/priority)

export const MOVE_DATABASE: Record<string, MoveDefinition> = {
    // ============ FIRE ============
    ember: {
        moveId: 1,
        name: 'Ember',
        type: 'FIRE',
        category: 'SPECIAL',
        power: 50,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'BURN',
        statusChance: 10,
        description: 'A small flame that may burn the target.',
    },
    flamethrower: {
        moveId: 2,
        name: 'Flamethrower',
        type: 'FIRE',
        category: 'SPECIAL',
        power: 90,
        accuracy: 85,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'BURN',
        statusChance: 20,
        description: 'A powerful stream of fire.',
    },
    inferno: {
        moveId: 3,
        name: 'Inferno',
        type: 'FIRE',
        category: 'SPECIAL',
        power: 130,
        accuracy: 60,
        cooldownMax: 3,
        priority: 0,
        statusEffect: 'BURN',
        statusChance: 50,
        description: 'An intense blaze that engulfs the target.',
    },
    fire_fang: {
        moveId: 4,
        name: 'Fire Fang',
        type: 'FIRE',
        category: 'PHYSICAL',
        power: 65,
        accuracy: 95,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'BURN',
        statusChance: 10,
        description: 'A fiery bite that may burn.',
    },
    flame_burst: {
        moveId: 5,
        name: 'Flame Burst',
        type: 'FIRE',
        category: 'SPECIAL',
        power: 70,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusChance: 0,
        description: 'An explosive burst of flames.',
    },
    will_o_wisp: {
        moveId: 6,
        name: "Will-O-Wisp",
        type: 'FIRE',
        category: 'STATUS',
        power: 0,
        accuracy: 85,
        cooldownMax: 2,
        priority: 0,
        statusEffect: 'BURN',
        statusChance: 100,
        description: 'A ghostly flame that always burns.',
    },

    // ============ WATER ============
    water_gun: {
        moveId: 11,
        name: 'Water Gun',
        type: 'WATER',
        category: 'SPECIAL',
        power: 50,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusChance: 0,
        description: 'A basic water jet.',
    },
    aqua_jet: {
        moveId: 12,
        name: 'Aqua Jet',
        type: 'WATER',
        category: 'PHYSICAL',
        power: 45,
        accuracy: 100,
        cooldownMax: 0,
        priority: 1,
        statusChance: 0,
        description: 'A fast tackle with water priority.',
    },
    hydro_pump: {
        moveId: 13,
        name: 'Hydro Pump',
        type: 'WATER',
        category: 'SPECIAL',
        power: 120,
        accuracy: 70,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'A devastating water blast.',
    },
    surf: {
        moveId: 14,
        name: 'Surf',
        type: 'WATER',
        category: 'SPECIAL',
        power: 85,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusChance: 0,
        description: 'A crashing wave attack.',
    },
    scald: {
        moveId: 15,
        name: 'Scald',
        type: 'WATER',
        category: 'SPECIAL',
        power: 80,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'BURN',
        statusChance: 30,
        description: 'Hot water that may burn.',
    },
    healing_rain: {
        moveId: 16,
        name: 'Healing Rain',
        type: 'WATER',
        category: 'STATUS',
        power: 0,
        accuracy: 100,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Restores 30% HP.',
    },

    // ============ GRASS ============
    vine_whip: {
        moveId: 21,
        name: 'Vine Whip',
        type: 'GRASS',
        category: 'PHYSICAL',
        power: 50,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusChance: 0,
        description: 'Strike with vines.',
    },
    razor_leaf: {
        moveId: 22,
        name: 'Razor Leaf',
        type: 'GRASS',
        category: 'PHYSICAL',
        power: 60,
        accuracy: 95,
        cooldownMax: 0,
        priority: 0,
        statusChance: 0,
        description: 'Sharp leaves with high crit.',
    },
    solar_beam: {
        moveId: 23,
        name: 'Solar Beam',
        type: 'GRASS',
        category: 'SPECIAL',
        power: 130,
        accuracy: 70,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'A powerful solar blast.',
    },
    leaf_storm: {
        moveId: 24,
        name: 'Leaf Storm',
        type: 'GRASS',
        category: 'SPECIAL',
        power: 95,
        accuracy: 80,
        cooldownMax: 2,
        priority: 0,
        statusChance: 0,
        description: 'A storm of sharp leaves.',
    },
    leech_seed: {
        moveId: 25,
        name: 'Leech Seed',
        type: 'GRASS',
        category: 'STATUS',
        power: 0,
        accuracy: 90,
        cooldownMax: 2,
        priority: 0,
        statusEffect: 'DRAIN',
        statusChance: 100,
        description: 'Drains HP each turn.',
    },
    synthesis: {
        moveId: 26,
        name: 'Synthesis',
        type: 'GRASS',
        category: 'STATUS',
        power: 0,
        accuracy: 100,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Restores 25% HP.',
    },

    // ============ ELECTRIC ============
    spark: {
        moveId: 31,
        name: 'Spark',
        type: 'ELECTRIC',
        category: 'SPECIAL',
        power: 55,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'PARALYZE',
        statusChance: 10,
        description: 'A spark that may paralyze.',
    },
    thunderbolt: {
        moveId: 32,
        name: 'Thunderbolt',
        type: 'ELECTRIC',
        category: 'SPECIAL',
        power: 95,
        accuracy: 80,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'PARALYZE',
        statusChance: 20,
        description: 'A powerful electric bolt.',
    },
    thunder: {
        moveId: 33,
        name: 'Thunder',
        type: 'ELECTRIC',
        category: 'SPECIAL',
        power: 130,
        accuracy: 60,
        cooldownMax: 3,
        priority: 0,
        statusEffect: 'PARALYZE',
        statusChance: 40,
        description: 'A devastating lightning strike.',
    },
    volt_switch: {
        moveId: 34,
        name: 'Volt Switch',
        type: 'ELECTRIC',
        category: 'PHYSICAL',
        power: 70,
        accuracy: 90,
        cooldownMax: 1,
        priority: 2,
        statusChance: 0,
        description: 'A fast electric tackle.',
    },
    thunder_wave: {
        moveId: 35,
        name: 'Thunder Wave',
        type: 'ELECTRIC',
        category: 'STATUS',
        power: 0,
        accuracy: 90,
        cooldownMax: 2,
        priority: 0,
        statusEffect: 'PARALYZE',
        statusChance: 100,
        description: 'Guarantees paralysis.',
    },
    discharge: {
        moveId: 36,
        name: 'Discharge',
        type: 'ELECTRIC',
        category: 'SPECIAL',
        power: 80,
        accuracy: 85,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'PARALYZE',
        statusChance: 30,
        description: 'An electric discharge.',
    },

    // ============ ICE ============
    ice_shard: {
        moveId: 41,
        name: 'Ice Shard',
        type: 'ICE',
        category: 'PHYSICAL',
        power: 50,
        accuracy: 100,
        cooldownMax: 0,
        priority: 1,
        statusChance: 0,
        description: 'Fast ice with priority.',
    },
    ice_beam: {
        moveId: 42,
        name: 'Ice Beam',
        type: 'ICE',
        category: 'SPECIAL',
        power: 90,
        accuracy: 85,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'FREEZE',
        statusChance: 15,
        description: 'A freezing beam.',
    },
    blizzard: {
        moveId: 43,
        name: 'Blizzard',
        type: 'ICE',
        category: 'SPECIAL',
        power: 115,
        accuracy: 65,
        cooldownMax: 3,
        priority: 0,
        statusEffect: 'FREEZE',
        statusChance: 25,
        description: 'A devastating blizzard.',
    },
    ice_fang: {
        moveId: 44,
        name: 'Ice Fang',
        type: 'ICE',
        category: 'PHYSICAL',
        power: 65,
        accuracy: 95,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'FREEZE',
        statusChance: 10,
        description: 'An icy bite.',
    },
    absolute_zero: {
        moveId: 45,
        name: 'Absolute Zero',
        type: 'ICE',
        category: 'SPECIAL',
        power: 90,
        accuracy: 75,
        cooldownMax: 2,
        priority: 0,
        statusEffect: 'FREEZE',
        statusChance: 40,
        description: 'Extreme cold with high freeze chance.',
    },
    frost_armor: {
        moveId: 46,
        name: 'Frost Armor',
        type: 'ICE',
        category: 'STATUS',
        power: 0,
        accuracy: 100,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Raises defense temporarily.',
    },

    // ============ EARTH ============
    mud_slap: {
        moveId: 51,
        name: 'Mud Slap',
        type: 'EARTH',
        category: 'PHYSICAL',
        power: 45,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'BLIND',
        statusChance: 20,
        description: 'Mud that may blind.',
    },
    earthquake: {
        moveId: 52,
        name: 'Earthquake',
        type: 'EARTH',
        category: 'PHYSICAL',
        power: 100,
        accuracy: 85,
        cooldownMax: 2,
        priority: 0,
        statusChance: 0,
        description: 'A powerful quake.',
    },
    rock_slide: {
        moveId: 53,
        name: 'Rock Slide',
        type: 'EARTH',
        category: 'PHYSICAL',
        power: 75,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'STUN',
        statusChance: 15,
        description: 'Falling rocks that may stun.',
    },
    stone_edge: {
        moveId: 54,
        name: 'Stone Edge',
        type: 'EARTH',
        category: 'PHYSICAL',
        power: 115,
        accuracy: 70,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Sharp stones with high crit.',
    },
    bulldoze: {
        moveId: 55,
        name: 'Bulldoze',
        type: 'EARTH',
        category: 'PHYSICAL',
        power: 60,
        accuracy: 95,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'SLOW',
        statusChance: 100,
        description: 'Always slows the target.',
    },
    stone_wall: {
        moveId: 56,
        name: 'Stone Wall',
        type: 'EARTH',
        category: 'STATUS',
        power: 0,
        accuracy: 100,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Raises defense significantly.',
    },

    // ============ DARK ============
    shadow_sneak: {
        moveId: 61,
        name: 'Shadow Sneak',
        type: 'DARK',
        category: 'PHYSICAL',
        power: 45,
        accuracy: 100,
        cooldownMax: 0,
        priority: 1,
        statusChance: 0,
        description: 'Fast shadow with priority.',
    },
    dark_pulse: {
        moveId: 62,
        name: 'Dark Pulse',
        type: 'DARK',
        category: 'SPECIAL',
        power: 85,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusEffect: 'FEAR',
        statusChance: 20,
        description: 'Dark energy that may cause fear.',
    },
    night_slash: {
        moveId: 63,
        name: 'Night Slash',
        type: 'DARK',
        category: 'PHYSICAL',
        power: 75,
        accuracy: 95,
        cooldownMax: 0,
        priority: 0,
        statusChance: 0,
        description: 'A slashing attack in darkness.',
    },
    crunch: {
        moveId: 64,
        name: 'Crunch',
        type: 'DARK',
        category: 'PHYSICAL',
        power: 80,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusChance: 0,
        description: 'A powerful bite.',
    },
    nightmare: {
        moveId: 65,
        name: 'Nightmare',
        type: 'DARK',
        category: 'STATUS',
        power: 0,
        accuracy: 85,
        cooldownMax: 2,
        priority: 0,
        statusEffect: 'FEAR',
        statusChance: 100,
        description: 'Causes fear, may skip turn.',
    },
    shadow_ball: {
        moveId: 66,
        name: 'Shadow Ball',
        type: 'DARK',
        category: 'SPECIAL',
        power: 120,
        accuracy: 70,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'A powerful shadow projectile.',
    },

    // ============ LIGHT ============
    flash: {
        moveId: 71,
        name: 'Flash',
        type: 'LIGHT',
        category: 'SPECIAL',
        power: 50,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusEffect: 'BLIND',
        statusChance: 20,
        description: 'Bright light that may blind.',
    },
    holy_beam: {
        moveId: 72,
        name: 'Holy Beam',
        type: 'LIGHT',
        category: 'SPECIAL',
        power: 85,
        accuracy: 90,
        cooldownMax: 1,
        priority: 0,
        statusChance: 0,
        description: 'A beam of holy light.',
    },
    divine_light: {
        moveId: 73,
        name: 'Divine Light',
        type: 'LIGHT',
        category: 'SPECIAL',
        power: 120,
        accuracy: 70,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Overwhelming divine energy.',
    },
    radiance: {
        moveId: 74,
        name: 'Radiance',
        type: 'LIGHT',
        category: 'SPECIAL',
        power: 70,
        accuracy: 95,
        cooldownMax: 1,
        priority: 0,
        statusChance: 0,
        description: 'Radiant energy attack.',
    },
    purify: {
        moveId: 75,
        name: 'Purify',
        type: 'LIGHT',
        category: 'STATUS',
        power: 0,
        accuracy: 100,
        cooldownMax: 2,
        priority: 0,
        statusChance: 0,
        description: 'Removes all negative status.',
    },
    blessing: {
        moveId: 76,
        name: 'Blessing',
        type: 'LIGHT',
        category: 'STATUS',
        power: 0,
        accuracy: 100,
        cooldownMax: 3,
        priority: 0,
        statusChance: 0,
        description: 'Restores 25% HP.',
    },

    // ============ NEUTRAL ============
    tackle: {
        moveId: 101,
        name: 'Tackle',
        type: 'EARTH', // Neutral, closest to Earth
        category: 'PHYSICAL',
        power: 40,
        accuracy: 100,
        cooldownMax: 0,
        priority: 0,
        statusChance: 0,
        description: 'A basic tackle attack.',
    },
    quick_strike: {
        moveId: 102,
        name: 'Quick Strike',
        type: 'EARTH', // Neutral
        category: 'PHYSICAL',
        power: 35,
        accuracy: 100,
        cooldownMax: 0,
        priority: 1,
        statusChance: 0,
        description: 'A fast strike with priority.',
    },
};

// Get move by string ID
export function getMoveByName(name: string): MoveDefinition | undefined {
    return MOVE_DATABASE[name];
}

// Get move by numeric ID
export function getMoveById(id: number): MoveDefinition | undefined {
    return Object.values(MOVE_DATABASE).find(m => m.moveId === id);
}

// Get all moves for an element type
export function getMovesForElement(elementType: ElementType): MoveDefinition[] {
    return Object.values(MOVE_DATABASE).filter(m => m.type === elementType);
}

// Get move pool for element (string IDs)
export function getMovePoolForElement(elementType: ElementType): string[] {
    const elementMoves = Object.entries(MOVE_DATABASE)
        .filter(([_, m]) => m.type === elementType)
        .map(([name, _]) => name);

    // Add neutral moves
    return [...elementMoves, 'tackle', 'quick_strike'];
}
